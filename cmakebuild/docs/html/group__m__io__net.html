<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Mstdlib-1.0.0: Network I/O</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Mstdlib-1.0.0
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__m__io__net.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Network I/O<div class="ingroups"><a class="el" href="group__m__eventio.html">Event Based I/O Subsystem</a> &raquo; <a class="el" href="group__m__eventio__base.html">Base I/O subsystems</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__m__dns"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__dns.html">DNS Functions</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga0d3c956e19a647267f818beb367de6bc"><td class="memItemLeft" align="right" valign="top">typedef enum <a class="el" href="group__m__io__net.html#ga84d77b37b252e30d90cc6fd2a416267e">M_io_net_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__io__net.html#ga0d3c956e19a647267f818beb367de6bc">M_io_net_type_t</a></td></tr>
<tr class="separator:ga0d3c956e19a647267f818beb367de6bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga84d77b37b252e30d90cc6fd2a416267e"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__io__net.html#ga84d77b37b252e30d90cc6fd2a416267e">M_io_net_type</a> { <br />
&#160;&#160;<a class="el" href="group__m__io__net.html#gga84d77b37b252e30d90cc6fd2a416267ea5f95bd5b48dcaf1f1d5e911c8bba2d32">M_IO_NET_ANY</a> = 1, 
<br />
&#160;&#160;<a class="el" href="group__m__io__net.html#gga84d77b37b252e30d90cc6fd2a416267eacbc2aafcc4f1f23e1ecc73f27fb2a192">M_IO_NET_IPV4</a> = 2, 
<br />
&#160;&#160;<a class="el" href="group__m__io__net.html#gga84d77b37b252e30d90cc6fd2a416267ea8c2d3e438709058e8f0cdebbb6279bdd">M_IO_NET_IPV6</a> = 3
<br />
 }</td></tr>
<tr class="separator:ga84d77b37b252e30d90cc6fd2a416267e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gabb60697b08a7ee07079ea683a1060747"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__m__io.html#ga2d3bea9aaa4491c3c8dad94cf24498a2">M_io_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__io__net.html#gabb60697b08a7ee07079ea683a1060747">M_io_net_server_create</a> (<a class="el" href="group__m__io.html#ga845c131d8520206a2a7a9219d1bd1932">M_io_t</a> **io_out, unsigned short port, const char *bind_ip, <a class="el" href="group__m__io__net.html#ga0d3c956e19a647267f818beb367de6bc">M_io_net_type_t</a> type)</td></tr>
<tr class="separator:gabb60697b08a7ee07079ea683a1060747"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9c11a4575c3389ee8d11b6f084e257bd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__m__io.html#ga2d3bea9aaa4491c3c8dad94cf24498a2">M_io_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__io__net.html#ga9c11a4575c3389ee8d11b6f084e257bd">M_io_net_client_create</a> (<a class="el" href="group__m__io.html#ga845c131d8520206a2a7a9219d1bd1932">M_io_t</a> **io_out, <a class="el" href="group__m__dns.html#ga6d7651186321b1cc222aa53bd0fa3d22">M_dns_t</a> *dns, const char *host, unsigned short port, <a class="el" href="group__m__io__net.html#ga0d3c956e19a647267f818beb367de6bc">M_io_net_type_t</a> type)</td></tr>
<tr class="separator:ga9c11a4575c3389ee8d11b6f084e257bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacac8aafcb587102ac35b7cb4f3cdfcc6"><td class="memItemLeft" align="right" valign="top">M_bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__io__net.html#gacac8aafcb587102ac35b7cb4f3cdfcc6">M_io_net_set_keepalives</a> (<a class="el" href="group__m__io.html#ga845c131d8520206a2a7a9219d1bd1932">M_io_t</a> *io, M_uint64 idle_time_s, M_uint64 retry_time_s, M_uint64 retry_cnt)</td></tr>
<tr class="separator:gacac8aafcb587102ac35b7cb4f3cdfcc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga062314e26ee4553238d8d46a2f862146"><td class="memItemLeft" align="right" valign="top">M_bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__io__net.html#ga062314e26ee4553238d8d46a2f862146">M_io_net_set_nagle</a> (<a class="el" href="group__m__io.html#ga845c131d8520206a2a7a9219d1bd1932">M_io_t</a> *io, M_bool nagle_enabled)</td></tr>
<tr class="separator:ga062314e26ee4553238d8d46a2f862146"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadc02de1ab6bcb56b453eb8515f02674c"><td class="memItemLeft" align="right" valign="top">M_bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__io__net.html#gadc02de1ab6bcb56b453eb8515f02674c">M_io_net_set_connect_timeout_ms</a> (<a class="el" href="group__m__io.html#ga845c131d8520206a2a7a9219d1bd1932">M_io_t</a> *io, M_uint64 timeout_ms)</td></tr>
<tr class="separator:gadc02de1ab6bcb56b453eb8515f02674c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa687a683e208d9a009cf728caf6f96df"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__io__net.html#gaa687a683e208d9a009cf728caf6f96df">M_io_net_get_fqdn</a> (void)</td></tr>
<tr class="separator:gaa687a683e208d9a009cf728caf6f96df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga800a91973aafe81a5ad3977fbc28c7ca"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__io__net.html#ga800a91973aafe81a5ad3977fbc28c7ca">M_io_net_get_host</a> (<a class="el" href="group__m__io.html#ga845c131d8520206a2a7a9219d1bd1932">M_io_t</a> *io)</td></tr>
<tr class="separator:ga800a91973aafe81a5ad3977fbc28c7ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga11f193aa2d827dcd1faf26dd20a3d2a0"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__io__net.html#ga11f193aa2d827dcd1faf26dd20a3d2a0">M_io_net_get_ipaddr</a> (<a class="el" href="group__m__io.html#ga845c131d8520206a2a7a9219d1bd1932">M_io_t</a> *io)</td></tr>
<tr class="separator:ga11f193aa2d827dcd1faf26dd20a3d2a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1ea4d8faa134421ebe9765d2c60e032a"><td class="memItemLeft" align="right" valign="top">unsigned short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__io__net.html#ga1ea4d8faa134421ebe9765d2c60e032a">M_io_net_get_port</a> (<a class="el" href="group__m__io.html#ga845c131d8520206a2a7a9219d1bd1932">M_io_t</a> *io)</td></tr>
<tr class="separator:ga1ea4d8faa134421ebe9765d2c60e032a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9b5c7120aabf48773a689e3b17ddf33b"><td class="memItemLeft" align="right" valign="top">unsigned short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__io__net.html#ga9b5c7120aabf48773a689e3b17ddf33b">M_io_net_get_ephemeral_port</a> (<a class="el" href="group__m__io.html#ga845c131d8520206a2a7a9219d1bd1932">M_io_t</a> *io)</td></tr>
<tr class="separator:ga9b5c7120aabf48773a689e3b17ddf33b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga79dfed55a6ba8ccf55d1cef9fc89f8c3"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="group__m__io__net.html#ga84d77b37b252e30d90cc6fd2a416267e">M_io_net_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__io__net.html#ga79dfed55a6ba8ccf55d1cef9fc89f8c3">M_io_net_get_type</a> (<a class="el" href="group__m__io.html#ga845c131d8520206a2a7a9219d1bd1932">M_io_t</a> *io)</td></tr>
<tr class="separator:ga79dfed55a6ba8ccf55d1cef9fc89f8c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2432418ae7518ec1b29853ad9d6ac6f3"><td class="memItemLeft" align="right" valign="top">M_uint64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__io__net.html#ga2432418ae7518ec1b29853ad9d6ac6f3">M_io_net_time_dns_ms</a> (<a class="el" href="group__m__io.html#ga845c131d8520206a2a7a9219d1bd1932">M_io_t</a> *io)</td></tr>
<tr class="separator:ga2432418ae7518ec1b29853ad9d6ac6f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa365d2376afcc59c072f3f6d30c5df5d"><td class="memItemLeft" align="right" valign="top">M_uint64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__io__net.html#gaa365d2376afcc59c072f3f6d30c5df5d">M_io_net_time_connect_ms</a> (<a class="el" href="group__m__io.html#ga845c131d8520206a2a7a9219d1bd1932">M_io_t</a> *io)</td></tr>
<tr class="separator:gaa365d2376afcc59c072f3f6d30c5df5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga24d7ccc2e2cd558a75601ea06c559a3e"><td class="memItemLeft" align="right" valign="top">M_bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__io__net.html#ga24d7ccc2e2cd558a75601ea06c559a3e">M_io_net_ipaddr_to_bin</a> (unsigned char *ipaddr_bin, size_t ipaddr_bin_size, const char *ipaddr_str, size_t *ipaddr_bin_len)</td></tr>
<tr class="separator:ga24d7ccc2e2cd558a75601ea06c559a3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9c6bb6eb74bae838ffe5d53e908874bb"><td class="memItemLeft" align="right" valign="top">M_bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__io__net.html#ga9c6bb6eb74bae838ffe5d53e908874bb">M_io_net_bin_to_ipaddr</a> (char *ipaddr_str, size_t ipaddr_str_size, const unsigned char *ipaddr_bin, size_t ipaddr_bin_len)</td></tr>
<tr class="separator:ga9c6bb6eb74bae838ffe5d53e908874bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Network I/O functions</p>
<p>Capable of functioning as a network server and client.</p>
<h1>Examples </h1>
<h2>Client </h2>
<p>Example network client which downloads google.com's home page. This uses a network client connection wrapped in TLS. A trace layer is provided and is commented out.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;mstdlib/mstdlib.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;mstdlib/mstdlib_io.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;mstdlib/mstdlib_tls.h&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> do_trace(<span class="keywordtype">void</span> *cb_arg, <a class="code" href="group__m__io__trace.html#ga9de6468f493c8465ee53389d50c1dc87">M_io_trace_type_t</a> type, <a class="code" href="group__m__event.html#ga66b039653a61c8702310d03e6ba69802">M_event_type_t</a> event_type, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *data, <span class="keywordtype">size_t</span> data_len)</div><div class="line">{</div><div class="line">    <span class="keywordtype">char</span> *out;</div><div class="line"></div><div class="line">    <span class="keywordflow">switch</span> (type) {</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group__m__io__trace.html#gga906c49459ff07273bc2111733993ed69a08ed08ce37e683a12bf3a77dd62c468d">M_IO_TRACE_TYPE_READ</a>:</div><div class="line">            <a class="code" href="group__m__fmt.html#gae54b252ea2bcf34b09ef1fa0f134ffa8">M_printf</a>(<span class="stringliteral">&quot;READ:\n&quot;</span>);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group__m__io__trace.html#gga906c49459ff07273bc2111733993ed69a8156a9773735d37f3d4baf2446315f16">M_IO_TRACE_TYPE_WRITE</a>:</div><div class="line">            <a class="code" href="group__m__fmt.html#gae54b252ea2bcf34b09ef1fa0f134ffa8">M_printf</a>(<span class="stringliteral">&quot;WRITE:\n&quot;</span>);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">default</span>:</div><div class="line">            <span class="keywordflow">return</span>;</div><div class="line">    }</div><div class="line">    out = <a class="code" href="group__m__str__convert.html#ga92578e5f93242d414f9042c3d23ac7cb">M_str_hexdump</a>(<a class="code" href="group__m__str__convert.html#gga91fbd8e7976f8f06d8f54048585159efa58a3973b16170409c0588113d7ba4518">M_STR_HEXDUMP_HEADER</a>, 0, <span class="stringliteral">&quot;\t&quot;</span>, data, data_len);</div><div class="line">    <a class="code" href="group__m__fmt.html#gae54b252ea2bcf34b09ef1fa0f134ffa8">M_printf</a>(<span class="stringliteral">&quot;%s\n&quot;</span>, out);</div><div class="line">    <a class="code" href="group__m__mem.html#gac4b3c1d73d6efe2542f5e729b58a271d">M_free</a>(out);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> run_cb(<a class="code" href="group__m__event.html#ga747f0301bfcc6db3b51eaf07e2582350">M_event_t</a> *el, <a class="code" href="group__m__event.html#ga66b039653a61c8702310d03e6ba69802">M_event_type_t</a> etype, <a class="code" href="group__m__io.html#ga845c131d8520206a2a7a9219d1bd1932">M_io_t</a> *io, <span class="keywordtype">void</span> *thunk)</div><div class="line">{</div><div class="line">    <a class="code" href="group__m__buf.html#ga6c543ecf0004fc310faa23c6ed8b267f">M_buf_t</a> *connected_buf = thunk;</div><div class="line">    <span class="keywordtype">char</span>     buf[128]      = { 0 };</div><div class="line">    <span class="keywordtype">size_t</span>   len_written   = 0;</div><div class="line"></div><div class="line">    <span class="keywordflow">switch</span> (etype) {</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group__m__event.html#gga5d54358d8088f050bcdb141c6c0b21e7ab0fc60e031020cb3f36b70c4932d67f2">M_EVENT_TYPE_CONNECTED</a>:</div><div class="line">            <a class="code" href="group__m__fmt.html#gae54b252ea2bcf34b09ef1fa0f134ffa8">M_printf</a>(<span class="stringliteral">&quot;CONNECTED: %s%s%s:%d (%s: %s - session%sreused)\n&quot;</span>,</div><div class="line">                    <a class="code" href="group__m__io__net.html#ga79dfed55a6ba8ccf55d1cef9fc89f8c3">M_io_net_get_type</a>(io)==<a class="code" href="group__m__io__net.html#gga84d77b37b252e30d90cc6fd2a416267ea8c2d3e438709058e8f0cdebbb6279bdd">M_IO_NET_IPV6</a>?<span class="stringliteral">&quot;[&quot;</span>:<span class="stringliteral">&quot;&quot;</span>,</div><div class="line">                    <a class="code" href="group__m__io__net.html#ga11f193aa2d827dcd1faf26dd20a3d2a0">M_io_net_get_ipaddr</a>(io),</div><div class="line">                    <a class="code" href="group__m__io__net.html#ga79dfed55a6ba8ccf55d1cef9fc89f8c3">M_io_net_get_type</a>(io)==<a class="code" href="group__m__io__net.html#gga84d77b37b252e30d90cc6fd2a416267ea8c2d3e438709058e8f0cdebbb6279bdd">M_IO_NET_IPV6</a>?<span class="stringliteral">&quot;]&quot;</span>:<span class="stringliteral">&quot;&quot;</span>,</div><div class="line">                    <a class="code" href="group__m__io__net.html#ga1ea4d8faa134421ebe9765d2c60e032a">M_io_net_get_port</a>(io),</div><div class="line">                    <a class="code" href="group__m__tls__funcs.html#ga27e00d3675d2883fd9de38e6e2d8d003">M_tls_protocols_to_str</a>(<a class="code" href="group__m__tls__funcs.html#gabf66bf9ba4027fa3b4f665595eda8a28">M_tls_get_protocol</a>(io, <a class="code" href="group__m__io.html#gab7a547b4fd4cf01832020f8f0092d821">M_IO_LAYER_FIND_FIRST_ID</a>)),</div><div class="line">                    <a class="code" href="group__m__tls__funcs.html#ga8a6e5ed1f09a4a0d44cff68efb97c471">M_tls_get_cipher</a>(io, <a class="code" href="group__m__io.html#gab7a547b4fd4cf01832020f8f0092d821">M_IO_LAYER_FIND_FIRST_ID</a>),</div><div class="line">                    <a class="code" href="group__m__tls__funcs.html#ga2e3b3bf20eb77dcefefca3f267a773ad">M_tls_get_sessionreused</a>(io, <a class="code" href="group__m__io.html#gab7a547b4fd4cf01832020f8f0092d821">M_IO_LAYER_FIND_FIRST_ID</a>)?<span class="stringliteral">&quot;&quot;</span>:<span class="stringliteral">&quot; not &quot;</span>);</div><div class="line"></div><div class="line">            <a class="code" href="group__m__io.html#ga957eba52f32304ab07e06b516c04922a">M_io_write_from_buf</a>(io, connected_buf);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group__m__event.html#gga5d54358d8088f050bcdb141c6c0b21e7a8d2cf32ca08773c695e988635ebfd426">M_EVENT_TYPE_READ</a>:</div><div class="line">            <a class="code" href="group__m__io.html#gaaf3884f99346e5b40d40bc4bb08dcf5b">M_io_read</a>(io, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)buf, <span class="keyword">sizeof</span>(buf), &amp;len_written);</div><div class="line">            <span class="keywordflow">if</span> (len_written &gt; 0) {</div><div class="line">                <a class="code" href="group__m__fmt.html#gae54b252ea2bcf34b09ef1fa0f134ffa8">M_printf</a>(<span class="stringliteral">&quot;%.*s&quot;</span>, (<span class="keywordtype">int</span>)len_written, buf);</div><div class="line">            }</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group__m__event.html#gga5d54358d8088f050bcdb141c6c0b21e7a1713e94c1e0750f168d255f580fd4ad9">M_EVENT_TYPE_WRITE</a>:</div><div class="line">            <a class="code" href="group__m__io.html#ga957eba52f32304ab07e06b516c04922a">M_io_write_from_buf</a>(io, connected_buf);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group__m__event.html#gga5d54358d8088f050bcdb141c6c0b21e7a6cead05362ca89b2cc7353bf6b4c2c6e">M_EVENT_TYPE_DISCONNECTED</a>:</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group__m__event.html#gga5d54358d8088f050bcdb141c6c0b21e7adce269f93799cdca69ac20235895d0ac">M_EVENT_TYPE_ERROR</a>:</div><div class="line">            <a class="code" href="group__m__event.html#ga8fb286ac5ca7c7fedc1aa26fd4f640b4">M_event_done_with_disconnect</a>(el, 1000);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group__m__event.html#gga5d54358d8088f050bcdb141c6c0b21e7a571c000a93b3c198364a32e5e145f2d0">M_EVENT_TYPE_ACCEPT</a>:</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group__m__event.html#gga5d54358d8088f050bcdb141c6c0b21e7a89a67d4e5f2bdcadc1ffa3ba0473a6cf">M_EVENT_TYPE_OTHER</a>:</div><div class="line">            <a class="code" href="group__m__event.html#ga91277642f8c76eb816003d2cea649897">M_event_done</a>(el);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv)</div><div class="line">{</div><div class="line">    <a class="code" href="group__m__event.html#ga747f0301bfcc6db3b51eaf07e2582350">M_event_t</a> *el;</div><div class="line">    <a class="code" href="group__m__dns.html#ga6d7651186321b1cc222aa53bd0fa3d22">M_dns_t</a>   *dns;</div><div class="line">    <a class="code" href="group__m__buf.html#ga6c543ecf0004fc310faa23c6ed8b267f">M_buf_t</a>   *buf;</div><div class="line">    <a class="code" href="group__m__io.html#ga845c131d8520206a2a7a9219d1bd1932">M_io_t</a>    *io;</div><div class="line">    <a class="code" href="group__m__tls__funcs.html#ga926973c7a274988ccc7c65ca90cb8d6d">M_tls_clientctx_t</a> *ctx;</div><div class="line">    <span class="keywordtype">size_t</span>     layer_id;</div><div class="line"></div><div class="line"></div><div class="line">    dns = <a class="code" href="group__m__dns.html#ga6bf84aa1b967a06d2daf585ecce30128">M_dns_create</a>();</div><div class="line">    el  = <a class="code" href="group__m__event.html#gae169dca80125767d87fe196f32ea8d74">M_event_create</a>(<a class="code" href="group__m__event.html#gga72bc04891ff7b6142b7672a207ae74b1ac7efcb61cf28fa27d4a0a3daf68aaecf">M_EVENT_FLAG_NONE</a>);</div><div class="line">    buf = <a class="code" href="group__m__buf.html#ga2031dcfdfa76f5feb5a59c8e7ac155d0">M_buf_create</a>();</div><div class="line">    <a class="code" href="group__m__buf.html#gad226a7199f864ff6a630dc7f16508c30">M_buf_add_str</a>(buf, <span class="stringliteral">&quot;GET / HTTP/1.1\r\n&quot;</span>);</div><div class="line">    <a class="code" href="group__m__buf.html#gad226a7199f864ff6a630dc7f16508c30">M_buf_add_str</a>(buf, <span class="stringliteral">&quot;Host: www.google.com\r\n&quot;</span>);</div><div class="line">    <a class="code" href="group__m__buf.html#gad226a7199f864ff6a630dc7f16508c30">M_buf_add_str</a>(buf, <span class="stringliteral">&quot;Connection: close\r\n&quot;</span>);</div><div class="line">    <a class="code" href="group__m__buf.html#gad226a7199f864ff6a630dc7f16508c30">M_buf_add_str</a>(buf, <span class="stringliteral">&quot;\r\n&quot;</span>);</div><div class="line"></div><div class="line">    <a class="code" href="group__m__io__net.html#ga9c11a4575c3389ee8d11b6f084e257bd">M_io_net_client_create</a>(&amp;io, dns, <span class="stringliteral">&quot;google.com&quot;</span>, 443, <a class="code" href="group__m__io__net.html#gga84d77b37b252e30d90cc6fd2a416267ea5f95bd5b48dcaf1f1d5e911c8bba2d32">M_IO_NET_ANY</a>);</div><div class="line">    ctx = <a class="code" href="group__m__tls__funcs.html#ga466b388617ba458ea935448b1fc94276">M_tls_clientctx_create</a>();</div><div class="line">    <a class="code" href="group__m__tls__funcs.html#ga08e14903c8aba305505e8eed3dbcb913">M_tls_clientctx_set_default_trust</a>(ctx);</div><div class="line">    <a class="code" href="group__m__tls__funcs.html#gad683df29bc2d34eac5f361249a29514c">M_io_tls_client_add</a>(io, ctx, NULL, &amp;layer_id);</div><div class="line">    <a class="code" href="group__m__tls__funcs.html#gaf5ee2284fcaa5f91acf06f14db32c409">M_tls_clientctx_destroy</a>(ctx);</div><div class="line">    <span class="comment">//M_io_add_trace(io, &amp;layer_id, do_trace, NULL, NULL, NULL);</span></div><div class="line"></div><div class="line">    <a class="code" href="group__m__event.html#ga755cf00991529e324be3f9f49a5d5476">M_event_add</a>(el, io, run_cb, buf);</div><div class="line">    <a class="code" href="group__m__event.html#gab5e0ea9055833a684aee9587252ed5fd">M_event_loop</a>(el, M_TIMEOUT_INF);</div><div class="line"></div><div class="line">    <a class="code" href="group__m__io.html#ga1532f13c1f01fc1521b68a0f1d61c864">M_io_destroy</a>(io);</div><div class="line">    <a class="code" href="group__m__buf.html#gad51baebd5e46ee8231e78b926ccb198e">M_buf_cancel</a>(buf);</div><div class="line">    <a class="code" href="group__m__event.html#ga603f06976101b21e00517deb529f86bb">M_event_destroy</a>(el);</div><div class="line">    <a class="code" href="group__m__dns.html#ga242ac37ba5fc0ad26dae4cc53553092a">M_dns_destroy</a>(dns);</div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --><h2>Server </h2>
<p>Example network sever. This is an echo server which uses a state machine to determine what operation it should perform.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;mstdlib/mstdlib.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;mstdlib/mstdlib_io.h&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">enum</span> {</div><div class="line">    STATE_CHECK = 1,</div><div class="line">    STATE_ECHO,</div><div class="line">    STATE_EXIT</div><div class="line">} states_t;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line">    <a class="code" href="group__m__buf.html#ga6c543ecf0004fc310faa23c6ed8b267f">M_buf_t</a>           *write_buf;</div><div class="line">    <a class="code" href="group__m__parser.html#ga60164be64f8c962c795e5927642fc473">M_parser_t</a>        *read_parser;</div><div class="line">    <a class="code" href="group__m__io.html#ga845c131d8520206a2a7a9219d1bd1932">M_io_t</a>            *io;</div><div class="line">    <a class="code" href="group__m__event.html#ga747f0301bfcc6db3b51eaf07e2582350">M_event_t</a>         *el;</div><div class="line">    <a class="code" href="group__m__state__machine.html#gad576e0cce8ea03b5bfcffabfacfe6c14">M_state_machine_t</a> *sm;</div><div class="line">} ldata_t;</div><div class="line"></div><div class="line"><span class="keyword">static</span> <a class="code" href="group__m__state__machine.html#gac270a27ce03a23e30d86788b2103268b">M_state_machine_status_t</a> state_check(<span class="keywordtype">void</span> *data, M_uint64 *next)</div><div class="line">{</div><div class="line">    ldata_t *ldata = data;</div><div class="line"></div><div class="line">    (void)next;</div><div class="line"></div><div class="line">    <a class="code" href="group__m__parser.html#gad2f6bcc3999859f9bfabce4679697d30">M_parser_mark</a>(ldata-&gt;read_parser);</div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__m__parser.html#gafeb4f3232d2d842889823bdf70338ac6">M_parser_len</a>(ldata-&gt;read_parser) == 0 || <a class="code" href="group__m__parser.html#gae09ef7f274b45bbe005bb7f0d96ae011">M_parser_consume_until</a>(ldata-&gt;read_parser, (<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)<span class="stringliteral">&quot;\n&quot;</span>, 1, M_TRUE) == 0) {</div><div class="line">        <a class="code" href="group__m__parser.html#gab56a859c33b45f16a1af4134a502fc6c">M_parser_mark_rewind</a>(ldata-&gt;read_parser);</div><div class="line">        <span class="keywordflow">return</span> <a class="code" href="group__m__state__machine.html#ggac270a27ce03a23e30d86788b2103268ba268c02ad158bd9a779c2a1226704a672">M_STATE_MACHINE_STATUS_WAIT</a>;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> <a class="code" href="group__m__state__machine.html#ggac270a27ce03a23e30d86788b2103268ba99a33d04268a2612969eaf95a66aaa55">M_STATE_MACHINE_STATUS_NEXT</a>;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <a class="code" href="group__m__state__machine.html#gac270a27ce03a23e30d86788b2103268b">M_state_machine_status_t</a> state_echo(<span class="keywordtype">void</span> *data, M_uint64 *next)</div><div class="line">{</div><div class="line">    ldata_t *ldata = data;</div><div class="line">    <span class="keywordtype">char</span>    *out;</div><div class="line"></div><div class="line">    out = <a class="code" href="group__m__parser.html#ga0d79542fe6a498f071bbcc8fcb081949">M_parser_read_strdup_mark</a>(ldata-&gt;read_parser);</div><div class="line">    <a class="code" href="group__m__buf.html#gad226a7199f864ff6a630dc7f16508c30">M_buf_add_str</a>(ldata-&gt;write_buf, out);</div><div class="line">    <a class="code" href="group__m__io.html#ga957eba52f32304ab07e06b516c04922a">M_io_write_from_buf</a>(ldata-&gt;io, ldata-&gt;write_buf);</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (!<a class="code" href="group__m__str__check.html#ga5470a5985b0adb95aff5fc53780be8c7">M_str_eq</a>(out, <span class="stringliteral">&quot;EXIT\r\n&quot;</span>) &amp;&amp; !<a class="code" href="group__m__str__check.html#ga5470a5985b0adb95aff5fc53780be8c7">M_str_eq</a>(out, <span class="stringliteral">&quot;EXIT\n&quot;</span>))</div><div class="line">        *next = STATE_CHECK;</div><div class="line"></div><div class="line">    <a class="code" href="group__m__mem.html#gac4b3c1d73d6efe2542f5e729b58a271d">M_free</a>(out);</div><div class="line">    <span class="keywordflow">return</span> <a class="code" href="group__m__state__machine.html#ggac270a27ce03a23e30d86788b2103268ba99a33d04268a2612969eaf95a66aaa55">M_STATE_MACHINE_STATUS_NEXT</a>;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <a class="code" href="group__m__state__machine.html#gac270a27ce03a23e30d86788b2103268b">M_state_machine_status_t</a> state_exit(<span class="keywordtype">void</span> *data, M_uint64 *next)</div><div class="line">{</div><div class="line">    ldata_t *ldata = data;</div><div class="line">    (void)next;</div><div class="line">    <a class="code" href="group__m__event.html#ga8fb286ac5ca7c7fedc1aa26fd4f640b4">M_event_done_with_disconnect</a>(ldata-&gt;el, 1000);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> connection_cb(<a class="code" href="group__m__event.html#ga747f0301bfcc6db3b51eaf07e2582350">M_event_t</a> *el, <a class="code" href="group__m__event.html#ga66b039653a61c8702310d03e6ba69802">M_event_type_t</a> etype, <a class="code" href="group__m__io.html#ga845c131d8520206a2a7a9219d1bd1932">M_io_t</a> *io, <span class="keywordtype">void</span> *thunk)</div><div class="line">{</div><div class="line">    ldata_t                  *ldata      = thunk;</div><div class="line">    <span class="keywordtype">char</span>                      error[256] = { 0 };</div><div class="line">    M_bool                    clean      = M_FALSE;</div><div class="line">    <a class="code" href="group__m__state__machine.html#gac270a27ce03a23e30d86788b2103268b">M_state_machine_status_t</a>  status;</div><div class="line"></div><div class="line">    <span class="keywordflow">switch</span> (etype) {</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group__m__event.html#gga5d54358d8088f050bcdb141c6c0b21e7ab0fc60e031020cb3f36b70c4932d67f2">M_EVENT_TYPE_CONNECTED</a>:</div><div class="line">            <a class="code" href="group__m__fmt.html#gae54b252ea2bcf34b09ef1fa0f134ffa8">M_printf</a>(<span class="stringliteral">&quot;CLIENT CONNECTED: %s%s%s:%d\n&quot;</span>,</div><div class="line">                    <a class="code" href="group__m__io__net.html#ga79dfed55a6ba8ccf55d1cef9fc89f8c3">M_io_net_get_type</a>(io)==<a class="code" href="group__m__io__net.html#gga84d77b37b252e30d90cc6fd2a416267ea8c2d3e438709058e8f0cdebbb6279bdd">M_IO_NET_IPV6</a>?<span class="stringliteral">&quot;[&quot;</span>:<span class="stringliteral">&quot;&quot;</span>,</div><div class="line">                    <a class="code" href="group__m__io__net.html#ga11f193aa2d827dcd1faf26dd20a3d2a0">M_io_net_get_ipaddr</a>(io),</div><div class="line">                    <a class="code" href="group__m__io__net.html#ga79dfed55a6ba8ccf55d1cef9fc89f8c3">M_io_net_get_type</a>(io)==<a class="code" href="group__m__io__net.html#gga84d77b37b252e30d90cc6fd2a416267ea8c2d3e438709058e8f0cdebbb6279bdd">M_IO_NET_IPV6</a>?<span class="stringliteral">&quot;]&quot;</span>:<span class="stringliteral">&quot;&quot;</span>,</div><div class="line">                    <a class="code" href="group__m__io__net.html#ga1ea4d8faa134421ebe9765d2c60e032a">M_io_net_get_port</a>(io));</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group__m__event.html#gga5d54358d8088f050bcdb141c6c0b21e7a8d2cf32ca08773c695e988635ebfd426">M_EVENT_TYPE_READ</a>:</div><div class="line">            <span class="keywordflow">if</span> (<a class="code" href="group__m__io.html#ga0fb4e2775a964a263f7ec0fa50be4023">M_io_read_into_parser</a>(io, ldata-&gt;read_parser) == <a class="code" href="group__m__io.html#gga1ea9e3c1babf09b22f2b98899db790dba2778f41c2ec2dc7c612144ea5a591c30">M_IO_ERROR_SUCCESS</a>) {</div><div class="line">                status = <a class="code" href="group__m__state__machine.html#ga5907f72a878c13dd0517d874af6dfd5f">M_state_machine_run</a>(ldata-&gt;sm, ldata);</div><div class="line">                <span class="keywordflow">if</span> (status != <a class="code" href="group__m__state__machine.html#ggac270a27ce03a23e30d86788b2103268ba268c02ad158bd9a779c2a1226704a672">M_STATE_MACHINE_STATUS_WAIT</a>) {</div><div class="line">                    <a class="code" href="group__m__io.html#ga02a1aa7eee8d2fb2e7fdc189f33e649e">M_io_disconnect</a>(io);</div><div class="line">                }</div><div class="line">            }</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group__m__event.html#gga5d54358d8088f050bcdb141c6c0b21e7a1713e94c1e0750f168d255f580fd4ad9">M_EVENT_TYPE_WRITE</a>:</div><div class="line">            <span class="keywordflow">if</span> (<a class="code" href="group__m__buf.html#gaaff39362df33795d6c188ca3482a12cd">M_buf_len</a>(ldata-&gt;write_buf) &gt; 0) {</div><div class="line">                <a class="code" href="group__m__io.html#ga957eba52f32304ab07e06b516c04922a">M_io_write_from_buf</a>(io, ldata-&gt;write_buf);</div><div class="line">            }</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group__m__event.html#gga5d54358d8088f050bcdb141c6c0b21e7a6cead05362ca89b2cc7353bf6b4c2c6e">M_EVENT_TYPE_DISCONNECTED</a>:</div><div class="line">            clean = M_TRUE;</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group__m__event.html#gga5d54358d8088f050bcdb141c6c0b21e7a571c000a93b3c198364a32e5e145f2d0">M_EVENT_TYPE_ACCEPT</a>:</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group__m__event.html#gga5d54358d8088f050bcdb141c6c0b21e7adce269f93799cdca69ac20235895d0ac">M_EVENT_TYPE_ERROR</a>:</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group__m__event.html#gga5d54358d8088f050bcdb141c6c0b21e7a89a67d4e5f2bdcadc1ffa3ba0473a6cf">M_EVENT_TYPE_OTHER</a>:</div><div class="line">            <span class="keywordflow">if</span> (!clean) {</div><div class="line">                <a class="code" href="group__m__io.html#ga3e1f56ec1e586649c1b26eb7c72238de">M_io_get_error_string</a>(io, error, <span class="keyword">sizeof</span>(error));</div><div class="line">            }</div><div class="line">            <a class="code" href="group__m__fmt.html#gae54b252ea2bcf34b09ef1fa0f134ffa8">M_printf</a>(<span class="stringliteral">&quot;CLIENT DISCONNECTED: %s%s%s:%d (%s%s%s)\n&quot;</span>,</div><div class="line">                    <a class="code" href="group__m__io__net.html#ga79dfed55a6ba8ccf55d1cef9fc89f8c3">M_io_net_get_type</a>(io)==<a class="code" href="group__m__io__net.html#gga84d77b37b252e30d90cc6fd2a416267ea8c2d3e438709058e8f0cdebbb6279bdd">M_IO_NET_IPV6</a>?<span class="stringliteral">&quot;[&quot;</span>:<span class="stringliteral">&quot;&quot;</span>,</div><div class="line">                    <a class="code" href="group__m__io__net.html#ga11f193aa2d827dcd1faf26dd20a3d2a0">M_io_net_get_ipaddr</a>(io),</div><div class="line">                    <a class="code" href="group__m__io__net.html#ga79dfed55a6ba8ccf55d1cef9fc89f8c3">M_io_net_get_type</a>(io)==<a class="code" href="group__m__io__net.html#gga84d77b37b252e30d90cc6fd2a416267ea8c2d3e438709058e8f0cdebbb6279bdd">M_IO_NET_IPV6</a>?<span class="stringliteral">&quot;]&quot;</span>:<span class="stringliteral">&quot;&quot;</span>,</div><div class="line">                    <a class="code" href="group__m__io__net.html#ga1ea4d8faa134421ebe9765d2c60e032a">M_io_net_get_port</a>(io),</div><div class="line">                    clean?<span class="stringliteral">&quot;clean&quot;</span>:<span class="stringliteral">&quot;unclean&quot;</span>, clean?<span class="stringliteral">&quot;&quot;</span>:<span class="stringliteral">&quot; - &quot;</span>, clean?<span class="stringliteral">&quot;&quot;</span>:error);</div><div class="line"></div><div class="line">            <a class="code" href="group__m__io.html#ga1532f13c1f01fc1521b68a0f1d61c864">M_io_destroy</a>(io);</div><div class="line">            <a class="code" href="group__m__state__machine.html#gaff67fd829b43aabe519c004d44cd0211">M_state_machine_destroy</a>(ldata-&gt;sm);</div><div class="line">            <a class="code" href="group__m__buf.html#gad51baebd5e46ee8231e78b926ccb198e">M_buf_cancel</a>(ldata-&gt;write_buf);</div><div class="line">            <a class="code" href="group__m__parser.html#ga3cd7b444d6f5058b149bc4c7262d5cb7">M_parser_destroy</a>(ldata-&gt;read_parser);</div><div class="line">            <a class="code" href="group__m__mem.html#gac4b3c1d73d6efe2542f5e729b58a271d">M_free</a>(ldata);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> listen_cb(<a class="code" href="group__m__event.html#ga747f0301bfcc6db3b51eaf07e2582350">M_event_t</a> *el, <a class="code" href="group__m__event.html#ga66b039653a61c8702310d03e6ba69802">M_event_type_t</a> etype, <a class="code" href="group__m__io.html#ga845c131d8520206a2a7a9219d1bd1932">M_io_t</a> *io, <span class="keywordtype">void</span> *thunk)</div><div class="line">{</div><div class="line">    <a class="code" href="group__m__io.html#ga845c131d8520206a2a7a9219d1bd1932">M_io_t</a>       *io_out     = NULL;</div><div class="line">    ldata_t      *ldata;</div><div class="line">    <a class="code" href="group__m__io.html#ga2d3bea9aaa4491c3c8dad94cf24498a2">M_io_error_t</a>  ioerr;</div><div class="line">    <span class="keywordtype">char</span>          error[256] = { 0 };</div><div class="line"></div><div class="line">    (void)thunk;</div><div class="line"></div><div class="line">    <span class="keywordflow">switch</span> (etype) {</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group__m__event.html#gga5d54358d8088f050bcdb141c6c0b21e7a571c000a93b3c198364a32e5e145f2d0">M_EVENT_TYPE_ACCEPT</a>:</div><div class="line">            ioerr = <a class="code" href="group__m__io.html#ga71d86bb1d3ea521f64005e7d31f90909">M_io_accept</a>(&amp;io_out, io);</div><div class="line">            <span class="keywordflow">if</span> (ioerr == <a class="code" href="group__m__io.html#gga1ea9e3c1babf09b22f2b98899db790dba2ace85a86b9ab6805d5838754b4c111c">M_IO_ERROR_WOULDBLOCK</a>) {</div><div class="line">                <span class="keywordflow">return</span>;</div><div class="line">            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ioerr != <a class="code" href="group__m__io.html#gga1ea9e3c1babf09b22f2b98899db790dba2778f41c2ec2dc7c612144ea5a591c30">M_IO_ERROR_SUCCESS</a> || io_out == NULL) {</div><div class="line">                <a class="code" href="group__m__io.html#ga3e1f56ec1e586649c1b26eb7c72238de">M_io_get_error_string</a>(io, error, <span class="keyword">sizeof</span>(error));</div><div class="line">                <a class="code" href="group__m__fmt.html#gae54b252ea2bcf34b09ef1fa0f134ffa8">M_printf</a>(<span class="stringliteral">&quot;ACCEPT FAILURE: %s\n&quot;</span>, error);</div><div class="line">                <a class="code" href="group__m__io.html#ga1532f13c1f01fc1521b68a0f1d61c864">M_io_destroy</a>(io_out);</div><div class="line">            }</div><div class="line"></div><div class="line">            ldata = <a class="code" href="group__m__mem.html#ga9473a8ef59f5c85d37b3d35f461a82f1">M_malloc_zero</a>(<span class="keyword">sizeof</span>(*ldata));</div><div class="line">            ldata-&gt;el          = el;</div><div class="line">            ldata-&gt;write_buf   = <a class="code" href="group__m__buf.html#ga2031dcfdfa76f5feb5a59c8e7ac155d0">M_buf_create</a>();</div><div class="line">            ldata-&gt;read_parser = <a class="code" href="group__m__parser.html#gaf8100f8e139f41315478133992cc8ad1">M_parser_create</a>(<a class="code" href="group__m__parser.html#gga5f283601804b657a199f6574996ccf87a5879ad8c9fea3f4031268d7917b03933">M_PARSER_FLAG_NONE</a>);</div><div class="line">            ldata-&gt;io          = io_out;</div><div class="line">            ldata-&gt;sm          = <a class="code" href="group__m__state__machine.html#ga3477b2670869577b546e5033411df95c">M_state_machine_create</a>(0, NULL, <a class="code" href="group__m__state__machine.html#gga5172f2a4ea588087e85b9f44f99da78aa3996716d4796593cede212cbd06e22ec">M_STATE_MACHINE_NONE</a>);</div><div class="line">            <a class="code" href="group__m__state__machine.html#ga6e832f9aca09dc77eb4aeddb038b0508">M_state_machine_insert_state</a>(ldata-&gt;sm, STATE_CHECK, 0, NULL, state_check, NULL, NULL);</div><div class="line">            <a class="code" href="group__m__state__machine.html#ga6e832f9aca09dc77eb4aeddb038b0508">M_state_machine_insert_state</a>(ldata-&gt;sm, STATE_ECHO, 0, NULL, state_echo, NULL, NULL);</div><div class="line">            <a class="code" href="group__m__state__machine.html#ga6e832f9aca09dc77eb4aeddb038b0508">M_state_machine_insert_state</a>(ldata-&gt;sm, STATE_EXIT, 0, NULL, state_exit, NULL, NULL);</div><div class="line"></div><div class="line">            <a class="code" href="group__m__event.html#ga755cf00991529e324be3f9f49a5d5476">M_event_add</a>(el, io_out, connection_cb, ldata);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group__m__event.html#gga5d54358d8088f050bcdb141c6c0b21e7ab0fc60e031020cb3f36b70c4932d67f2">M_EVENT_TYPE_CONNECTED</a>:</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group__m__event.html#gga5d54358d8088f050bcdb141c6c0b21e7a8d2cf32ca08773c695e988635ebfd426">M_EVENT_TYPE_READ</a>:</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group__m__event.html#gga5d54358d8088f050bcdb141c6c0b21e7a1713e94c1e0750f168d255f580fd4ad9">M_EVENT_TYPE_WRITE</a>:</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group__m__event.html#gga5d54358d8088f050bcdb141c6c0b21e7a6cead05362ca89b2cc7353bf6b4c2c6e">M_EVENT_TYPE_DISCONNECTED</a>:</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group__m__event.html#gga5d54358d8088f050bcdb141c6c0b21e7adce269f93799cdca69ac20235895d0ac">M_EVENT_TYPE_ERROR</a>:</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group__m__event.html#gga5d54358d8088f050bcdb141c6c0b21e7a89a67d4e5f2bdcadc1ffa3ba0473a6cf">M_EVENT_TYPE_OTHER</a>:</div><div class="line">            <a class="code" href="group__m__io.html#ga1532f13c1f01fc1521b68a0f1d61c864">M_io_destroy</a>(io);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv)</div><div class="line">{</div><div class="line">    <a class="code" href="group__m__event.html#ga747f0301bfcc6db3b51eaf07e2582350">M_event_t</a>    *el;</div><div class="line">    <a class="code" href="group__m__io.html#ga845c131d8520206a2a7a9219d1bd1932">M_io_t</a>       *io = NULL;</div><div class="line">    <a class="code" href="group__m__io.html#ga2d3bea9aaa4491c3c8dad94cf24498a2">M_io_error_t</a>  ioerr;</div><div class="line"></div><div class="line"></div><div class="line">    ioerr = <a class="code" href="group__m__io__net.html#gabb60697b08a7ee07079ea683a1060747">M_io_net_server_create</a>(&amp;io, 8999, NULL, <a class="code" href="group__m__io__net.html#gga84d77b37b252e30d90cc6fd2a416267eacbc2aafcc4f1f23e1ecc73f27fb2a192">M_IO_NET_IPV4</a>);</div><div class="line">    <span class="keywordflow">if</span> (ioerr != <a class="code" href="group__m__io.html#gga1ea9e3c1babf09b22f2b98899db790dba2778f41c2ec2dc7c612144ea5a591c30">M_IO_ERROR_SUCCESS</a>) {</div><div class="line">        <a class="code" href="group__m__fmt.html#gae54b252ea2bcf34b09ef1fa0f134ffa8">M_printf</a>(<span class="stringliteral">&quot;Could not start server: %s\n&quot;</span>, <a class="code" href="group__m__io.html#ga89a45c257b8b62345c2bc035da6cc4d0">M_io_error_string</a>(ioerr));</div><div class="line">        <span class="keywordflow">return</span> 0;</div><div class="line">    }</div><div class="line"></div><div class="line">    el = <a class="code" href="group__m__event.html#gae169dca80125767d87fe196f32ea8d74">M_event_create</a>(<a class="code" href="group__m__event.html#gga72bc04891ff7b6142b7672a207ae74b1ac7efcb61cf28fa27d4a0a3daf68aaecf">M_EVENT_FLAG_NONE</a>);</div><div class="line"></div><div class="line">    <a class="code" href="group__m__event.html#ga755cf00991529e324be3f9f49a5d5476">M_event_add</a>(el, io, listen_cb, NULL);</div><div class="line">    <a class="code" href="group__m__event.html#gab5e0ea9055833a684aee9587252ed5fd">M_event_loop</a>(el, M_TIMEOUT_INF);</div><div class="line"></div><div class="line">    <a class="code" href="group__m__event.html#ga603f06976101b21e00517deb529f86bb">M_event_destroy</a>(el);</div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --> <h2 class="groupheader">Typedef Documentation</h2>
<a id="ga0d3c956e19a647267f818beb367de6bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0d3c956e19a647267f818beb367de6bc">&#9670;&nbsp;</a></span>M_io_net_type_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef enum <a class="el" href="group__m__io__net.html#ga84d77b37b252e30d90cc6fd2a416267e">M_io_net_type</a> <a class="el" href="group__m__io__net.html#ga0d3c956e19a647267f818beb367de6bc">M_io_net_type_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="ga84d77b37b252e30d90cc6fd2a416267e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga84d77b37b252e30d90cc6fd2a416267e">&#9670;&nbsp;</a></span>M_io_net_type</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__m__io__net.html#ga84d77b37b252e30d90cc6fd2a416267e">M_io_net_type</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>IP connection type. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga84d77b37b252e30d90cc6fd2a416267ea5f95bd5b48dcaf1f1d5e911c8bba2d32"></a>M_IO_NET_ANY&#160;</td><td class="fielddoc"><p>Either ipv4 or ipv6 </p>
</td></tr>
<tr><td class="fieldname"><a id="gga84d77b37b252e30d90cc6fd2a416267eacbc2aafcc4f1f23e1ecc73f27fb2a192"></a>M_IO_NET_IPV4&#160;</td><td class="fielddoc"><p>ipv4 only </p>
</td></tr>
<tr><td class="fieldname"><a id="gga84d77b37b252e30d90cc6fd2a416267ea8c2d3e438709058e8f0cdebbb6279bdd"></a>M_IO_NET_IPV6&#160;</td><td class="fielddoc"><p>ipv6 only </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gabb60697b08a7ee07079ea683a1060747"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabb60697b08a7ee07079ea683a1060747">&#9670;&nbsp;</a></span>M_io_net_server_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__m__io.html#ga2d3bea9aaa4491c3c8dad94cf24498a2">M_io_error_t</a> M_io_net_server_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__m__io.html#ga845c131d8520206a2a7a9219d1bd1932">M_io_t</a> **&#160;</td>
          <td class="paramname"><em>io_out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned short&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>bind_ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__m__io__net.html#ga0d3c956e19a647267f818beb367de6bc">M_io_net_type_t</a>&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create a server listener net object.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">io_out</td><td>io object for communication. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">port</td><td>Port to listen on. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bind_ip</td><td>NULL to listen on all interfaces, or an explicit ip address to listen on. Note that listening on localhost ::1 will be ipv6 only, or localhost 127.0.0.1 will be ipv4 only. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">type</td><td>Connection type.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Result. </dd></dl>

</div>
</div>
<a id="ga9c11a4575c3389ee8d11b6f084e257bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9c11a4575c3389ee8d11b6f084e257bd">&#9670;&nbsp;</a></span>M_io_net_client_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__m__io.html#ga2d3bea9aaa4491c3c8dad94cf24498a2">M_io_error_t</a> M_io_net_client_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__m__io.html#ga845c131d8520206a2a7a9219d1bd1932">M_io_t</a> **&#160;</td>
          <td class="paramname"><em>io_out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__m__dns.html#ga6d7651186321b1cc222aa53bd0fa3d22">M_dns_t</a> *&#160;</td>
          <td class="paramname"><em>dns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned short&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__m__io__net.html#ga0d3c956e19a647267f818beb367de6bc">M_io_net_type_t</a>&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create a client net object.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">io_out</td><td>io object for communication. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dns</td><td>DNS object for host name lookup. Required. It will be reference counted allowing it to be destroyed while still in use by the io object. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">host</td><td>Host to connect to. Can be a host name or ip address. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">port</td><td>Port to connect to. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">type</td><td>Connection type.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Result. </dd></dl>

</div>
</div>
<a id="gacac8aafcb587102ac35b7cb4f3cdfcc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacac8aafcb587102ac35b7cb4f3cdfcc6">&#9670;&nbsp;</a></span>M_io_net_set_keepalives()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M_bool M_io_net_set_keepalives </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__m__io.html#ga845c131d8520206a2a7a9219d1bd1932">M_io_t</a> *&#160;</td>
          <td class="paramname"><em>io</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">M_uint64&#160;</td>
          <td class="paramname"><em>idle_time_s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">M_uint64&#160;</td>
          <td class="paramname"><em>retry_time_s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">M_uint64&#160;</td>
          <td class="paramname"><em>retry_cnt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set keep alive.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">io</td><td>io object. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">idle_time_s</td><td>Idle time in seconds. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">retry_time_s</td><td>Retry time in seconds. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">retry_cnt</td><td>Retry count.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>M_TRUE on success, otherwise M_FALSE on failure. </dd></dl>

</div>
</div>
<a id="ga062314e26ee4553238d8d46a2f862146"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga062314e26ee4553238d8d46a2f862146">&#9670;&nbsp;</a></span>M_io_net_set_nagle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M_bool M_io_net_set_nagle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__m__io.html#ga845c131d8520206a2a7a9219d1bd1932">M_io_t</a> *&#160;</td>
          <td class="paramname"><em>io</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">M_bool&#160;</td>
          <td class="paramname"><em>nagle_enabled</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Enable/disable Nagle algorithm.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">io</td><td>io object. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nagle_enabled</td><td>M_TRUE to enable, M_FALSE to disable.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>M_TRUE on success, otherwise M_FALSE on error. Will return M_TRUE if state being set is the same as already set. Meaning, enabling on an io that already has it enabled will return success. </dd></dl>

</div>
</div>
<a id="gadc02de1ab6bcb56b453eb8515f02674c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadc02de1ab6bcb56b453eb8515f02674c">&#9670;&nbsp;</a></span>M_io_net_set_connect_timeout_ms()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M_bool M_io_net_set_connect_timeout_ms </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__m__io.html#ga845c131d8520206a2a7a9219d1bd1932">M_io_t</a> *&#160;</td>
          <td class="paramname"><em>io</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">M_uint64&#160;</td>
          <td class="paramname"><em>timeout_ms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set connect timeout.</p>
<p>This is the timeout to wait for a connection to finish.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">io</td><td>io object. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout_ms</td><td>Timeout in milliseconds.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>M_TRUE on success, otherwise M_FALSE on error. </dd></dl>

</div>
</div>
<a id="gaa687a683e208d9a009cf728caf6f96df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa687a683e208d9a009cf728caf6f96df">&#9670;&nbsp;</a></span>M_io_net_get_fqdn()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* M_io_net_get_fqdn </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the Fully Qualified Domain Name.</p>
<dl class="section return"><dt>Returns</dt><dd>String. </dd></dl>

</div>
</div>
<a id="ga800a91973aafe81a5ad3977fbc28c7ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga800a91973aafe81a5ad3977fbc28c7ca">&#9670;&nbsp;</a></span>M_io_net_get_host()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* M_io_net_get_host </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__m__io.html#ga845c131d8520206a2a7a9219d1bd1932">M_io_t</a> *&#160;</td>
          <td class="paramname"><em>io</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the hostname of the connected endpoint.</p>
<p>This may return an IP address for inbound connections, or for outbound connections where an ip address was passed. This will not do a reverse hostname lookup.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">io</td><td>io object.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>String. </dd></dl>

</div>
</div>
<a id="ga11f193aa2d827dcd1faf26dd20a3d2a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga11f193aa2d827dcd1faf26dd20a3d2a0">&#9670;&nbsp;</a></span>M_io_net_get_ipaddr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* M_io_net_get_ipaddr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__m__io.html#ga845c131d8520206a2a7a9219d1bd1932">M_io_t</a> *&#160;</td>
          <td class="paramname"><em>io</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the IP address of the connected endpoint.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">io</td><td>io object.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>String. </dd></dl>

</div>
</div>
<a id="ga1ea4d8faa134421ebe9765d2c60e032a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1ea4d8faa134421ebe9765d2c60e032a">&#9670;&nbsp;</a></span>M_io_net_get_port()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned short M_io_net_get_port </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__m__io.html#ga845c131d8520206a2a7a9219d1bd1932">M_io_t</a> *&#160;</td>
          <td class="paramname"><em>io</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the port of the connected endpoint.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">io</td><td>io object.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Port. </dd></dl>

</div>
</div>
<a id="ga9b5c7120aabf48773a689e3b17ddf33b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9b5c7120aabf48773a689e3b17ddf33b">&#9670;&nbsp;</a></span>M_io_net_get_ephemeral_port()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned short M_io_net_get_ephemeral_port </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__m__io.html#ga845c131d8520206a2a7a9219d1bd1932">M_io_t</a> *&#160;</td>
          <td class="paramname"><em>io</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the ephemeral (dynamic) port of the connected endpoint</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">io</td><td>io object.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Port. </dd></dl>

</div>
</div>
<a id="ga79dfed55a6ba8ccf55d1cef9fc89f8c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga79dfed55a6ba8ccf55d1cef9fc89f8c3">&#9670;&nbsp;</a></span>M_io_net_get_type()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__m__io__net.html#ga84d77b37b252e30d90cc6fd2a416267e">M_io_net_type</a> M_io_net_get_type </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__m__io.html#ga845c131d8520206a2a7a9219d1bd1932">M_io_t</a> *&#160;</td>
          <td class="paramname"><em>io</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get connection type</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">io</td><td>io object.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Type. </dd></dl>

</div>
</div>
<a id="ga2432418ae7518ec1b29853ad9d6ac6f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2432418ae7518ec1b29853ad9d6ac6f3">&#9670;&nbsp;</a></span>M_io_net_time_dns_ms()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M_uint64 M_io_net_time_dns_ms </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__m__io.html#ga845c131d8520206a2a7a9219d1bd1932">M_io_t</a> *&#160;</td>
          <td class="paramname"><em>io</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Amount of time DNS query took</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">io</td><td>io object.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Time in milliseconds. </dd></dl>

</div>
</div>
<a id="gaa365d2376afcc59c072f3f6d30c5df5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa365d2376afcc59c072f3f6d30c5df5d">&#9670;&nbsp;</a></span>M_io_net_time_connect_ms()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M_uint64 M_io_net_time_connect_ms </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__m__io.html#ga845c131d8520206a2a7a9219d1bd1932">M_io_t</a> *&#160;</td>
          <td class="paramname"><em>io</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Amount of time connection establishment took, not including DNS resolution time</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">io</td><td>io object.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Time in milliseconds. </dd></dl>

</div>
</div>
<a id="ga24d7ccc2e2cd558a75601ea06c559a3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga24d7ccc2e2cd558a75601ea06c559a3e">&#9670;&nbsp;</a></span>M_io_net_ipaddr_to_bin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M_bool M_io_net_ipaddr_to_bin </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>ipaddr_bin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>ipaddr_bin_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>ipaddr_str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>ipaddr_bin_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Convert an ip address in string form into its binary network byte order representation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">ipaddr_bin</td><td>User-supplied buffer of at least 16 bytes to store result. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ipaddr_bin_size</td><td>Size of user-supplied buffer. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ipaddr_str</td><td>IPv4 or IPv6 address in string form. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ipaddr_bin_len</td><td>Pointer to hold length of ip address in binary form. Result will be 4 or 16 depending on the address type. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>M_TRUE if conversion was possible, M_FALSE otherwise </dd></dl>

</div>
</div>
<a id="ga9c6bb6eb74bae838ffe5d53e908874bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9c6bb6eb74bae838ffe5d53e908874bb">&#9670;&nbsp;</a></span>M_io_net_bin_to_ipaddr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M_bool M_io_net_bin_to_ipaddr </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>ipaddr_str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>ipaddr_str_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned char *&#160;</td>
          <td class="paramname"><em>ipaddr_bin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>ipaddr_bin_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Convert an ip address in its binary network byte order representation to string form.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">ipaddr_str</td><td>User-supplied buffer of at least 40 bytes to store IPv6 address, or 16 bytes to store IPv4 address. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ipaddr_str_size</td><td>Size of user-supplied buffer. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ipaddr_bin</td><td>IPv4 or IPv6 address in binary form. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ipaddr_bin_len</td><td>Length of ip address in binary form (must be 4 or 16).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>M_TRUE if conversion was possible, M_FALSE otherwise </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue Feb 20 2018 12:46:13 for Mstdlib-1.0.0 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
