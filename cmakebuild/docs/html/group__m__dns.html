<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Mstdlib-1.0.0: DNS Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Mstdlib-1.0.0
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__m__dns.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">DNS Functions<div class="ingroups"><a class="el" href="group__m__eventio.html">Event Based I/O Subsystem</a> &raquo; <a class="el" href="group__m__eventio__base.html">Base I/O subsystems</a> &raquo; <a class="el" href="group__m__io__net.html">Network I/O</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga6d7651186321b1cc222aa53bd0fa3d22"><td class="memItemLeft" align="right" valign="top">typedef struct M_dns&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__dns.html#ga6d7651186321b1cc222aa53bd0fa3d22">M_dns_t</a></td></tr>
<tr class="separator:ga6d7651186321b1cc222aa53bd0fa3d22"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga6bf84aa1b967a06d2daf585ecce30128"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__m__dns.html#ga6d7651186321b1cc222aa53bd0fa3d22">M_dns_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__dns.html#ga6bf84aa1b967a06d2daf585ecce30128">M_dns_create</a> (void)</td></tr>
<tr class="separator:ga6bf84aa1b967a06d2daf585ecce30128"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga242ac37ba5fc0ad26dae4cc53553092a"><td class="memItemLeft" align="right" valign="top">M_bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__dns.html#ga242ac37ba5fc0ad26dae4cc53553092a">M_dns_destroy</a> (<a class="el" href="group__m__dns.html#ga6d7651186321b1cc222aa53bd0fa3d22">M_dns_t</a> *dns)</td></tr>
<tr class="separator:ga242ac37ba5fc0ad26dae4cc53553092a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0b9b5f19df59f01d63fe93a2beb2a284"><td class="memItemLeft" align="right" valign="top">M_bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__dns.html#ga0b9b5f19df59f01d63fe93a2beb2a284">M_dns_set_query_timeout</a> (<a class="el" href="group__m__dns.html#ga6d7651186321b1cc222aa53bd0fa3d22">M_dns_t</a> *dns, M_uint64 timeout_ms)</td></tr>
<tr class="separator:ga0b9b5f19df59f01d63fe93a2beb2a284"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac306de41f62d6e9b1b5af689a844313b"><td class="memItemLeft" align="right" valign="top">M_bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m__dns.html#gac306de41f62d6e9b1b5af689a844313b">M_dns_set_cache_timeout</a> (<a class="el" href="group__m__dns.html#ga6d7651186321b1cc222aa53bd0fa3d22">M_dns_t</a> *dns, M_uint64 timeout_s, M_uint64 max_timeout_s)</td></tr>
<tr class="separator:gac306de41f62d6e9b1b5af689a844313b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>It's intended that a single global DNS object will be created to allow for caching. Aiding with caching, Happy eyeballs is used to aid in choosing the best server when DNS resolves multiple addresses. </p>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ga6d7651186321b1cc222aa53bd0fa3d22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6d7651186321b1cc222aa53bd0fa3d22">&#9670;&nbsp;</a></span>M_dns_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct M_dns <a class="el" href="group__m__dns.html#ga6d7651186321b1cc222aa53bd0fa3d22">M_dns_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga6bf84aa1b967a06d2daf585ecce30128"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6bf84aa1b967a06d2daf585ecce30128">&#9670;&nbsp;</a></span>M_dns_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__m__dns.html#ga6d7651186321b1cc222aa53bd0fa3d22">M_dns_t</a>* M_dns_create </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create a DNS resolver handle.</p>
<p>This resolver handle is responsible for caching DNS results as well as tracking which associated IP addresses resulted in successful or failed connections for optimizing future connection attempts. This DNS handle will be passed into functions that require DNS resolution like <a class="el" href="group__m__io__net.html#ga9c11a4575c3389ee8d11b6f084e257bd">M_io_net_client_create()</a>.</p>
<p>It is recommended to create a single DNS resolver handle at startup and pass the same handle to all functions which need it, and destroy the handle at shutdown.</p>
<dl class="section return"><dt>Returns</dt><dd>Initialized DNS handle </dd></dl>

</div>
</div>
<a id="ga242ac37ba5fc0ad26dae4cc53553092a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga242ac37ba5fc0ad26dae4cc53553092a">&#9670;&nbsp;</a></span>M_dns_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M_bool M_dns_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__m__dns.html#ga6d7651186321b1cc222aa53bd0fa3d22">M_dns_t</a> *&#160;</td>
          <td class="paramname"><em>dns</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Destroys the memory associated with a DNS handle.</p>
<p>DNS uses reference counters, and will delay destruction until after last consumer is destroyed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dns</td><td>Handle initialized via <a class="el" href="group__m__dns.html#ga6bf84aa1b967a06d2daf585ecce30128">M_dns_create()</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>M_TRUE on success, M_FALSE if handle is actively being used. </dd></dl>

</div>
</div>
<a id="ga0b9b5f19df59f01d63fe93a2beb2a284"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0b9b5f19df59f01d63fe93a2beb2a284">&#9670;&nbsp;</a></span>M_dns_set_query_timeout()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M_bool M_dns_set_query_timeout </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__m__dns.html#ga6d7651186321b1cc222aa53bd0fa3d22">M_dns_t</a> *&#160;</td>
          <td class="paramname"><em>dns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">M_uint64&#160;</td>
          <td class="paramname"><em>timeout_ms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set the maximum query time before a timeout is returned.</p>
<p>In some cases, if a prior result is cached, the query may still return success rather than a timeout failure at the end of a timeout, but the result will be stale. If set to 0, will use the internal default of 5000ms (5s)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dns</td><td>Initialized DNS object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout_ms</td><td>Timeout specified in milliseconds. If provided as 0, will use the default of 5000ms (5s).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>M_TRUE if set successfully, M_FALSE otherwise </dd></dl>

</div>
</div>
<a id="gac306de41f62d6e9b1b5af689a844313b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac306de41f62d6e9b1b5af689a844313b">&#9670;&nbsp;</a></span>M_dns_set_cache_timeout()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M_bool M_dns_set_cache_timeout </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__m__dns.html#ga6d7651186321b1cc222aa53bd0fa3d22">M_dns_t</a> *&#160;</td>
          <td class="paramname"><em>dns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">M_uint64&#160;</td>
          <td class="paramname"><em>timeout_s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">M_uint64&#160;</td>
          <td class="paramname"><em>max_timeout_s</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set the maximum amount of time a DNS query can be cached for where results are served out of the cache rather than querying a remote DNS server.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dns</td><td>Initialized DNS object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout_s</td><td>Timeout in seconds of cache before another DNS query attempt will be made to refresh the cache. If 0 is specified, will use the default of 300s (5 minutes). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">max_timeout_s</td><td>Specify the maximum timeout of the cached results, even if no DNS server is reachable. Stale results can no longer be delivered after this timeframe and will result in DNS errors being returned. If 0 is specified, will use the default of 3600s (1 hr).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>M_TRUE if set successfully, M_FALSE otherwise </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue Feb 20 2018 12:46:13 for Mstdlib-1.0.0 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
